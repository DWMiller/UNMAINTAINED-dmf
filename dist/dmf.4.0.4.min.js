var dmf=function(){"use strict";var a={},b={debug:!1,startup:null};return{classes:{},config:{},data:{},events:{},modules:a,settings:{},templates:{},activate:function(a){return this.settings=this.extend(b,a),this.settings.startup?this.startModule(a.startup):(this.log(3,"A startup module has not been specified"),!1)},debug:function(a){return"undefined"==typeof a?void(this.debug=!this.debug):void(this.debug=a?!0:!1)},createModule:function(b,c){"string"==typeof b&&"function"==typeof c?(a[b]={create:c,config:this.config[b],instance:null},this.log(1,"Module '"+b+"' Registration : SUCCESS")):this.log(2,"Module '"+b+"' Registration : FAILED : one or more arguments are of incorrect type")},getModule:function(b){var c=a[b];return c?c.create(this,c.config):!1},startModule:function(b){var c=a[b];return c?(c.instance=this.getModule(b),c.instance.properties||(c.instance.properties={id:b}),c.instance.initialize&&"function"==typeof c.instance.initialize&&c.instance.initialize(),c.instance.properties.listeners&&this.registerEvents(c.instance.properties.listeners,b),this.log(1,"Start module '"+b+"': SUCCESS"),c.instance):(this.log(2,"Could not start module: "+b+". Module does not exist"),!1)},startModules:function(a){a.forEach(this.startModule,this)},startAllModules:function(){var b;for(b in a)a.hasOwnProperty(b)&&this.startModule(b)},stopModule:function(b){var c=a[b];return c?c.instance?(c.instance.properties.listeners&&this.removeEvents(Object.keys(c.instance.properties.listeners),b),c.instance.destroy&&"function"==typeof c.instance.destroy&&c.instance.destroy(),c.instance=null,delete c.instance,this.log(1,"Stop Module '"+b+"': SUCCESS"),!0):(this.log(2,"Stop Module '"+b+"': FAILED : module has not been started"),!1):(this.log(2,"Stop Module '"+b+"': FAILED : module does not exist"),!1)},stopModules:function(a){a.forEach(this.stopModule,this)},stopAllModules:function(){var b;for(b in a)a.hasOwnProperty(b)&&this.stopModule(b)},registerEvents:function(a,b){this.fn.is_obj(a)||this.log(1,"Error registering events for: "+b);for(var c in a)this.events[c]||(this.events[c]={}),this.events[c][b]=a[c]},notify:function(a){2==arguments.length?a={type:arguments[0],data:arguments[1]}:"string"==typeof a&&(a={type:a,data:{}});var b=this.events[a.type];if(b){var c;for(c in b)b[c](a.data)}},removeEvents:function(a,b){a.forEach(function(a){delete dmf.events[a][b]})},log:function(a,b){if(this.settings.debug){this.fn.is_arr(b)||(b=[b]);for(var c=0;c<b.length;c++)console[1===a?"log":2===a?"warn":"error"](JSON.stringify(b[c],null,4))}}}}();dmf.fn={is_arr:function(a){return"[object Array]"==toString.call(a)},is_obj:function(a){return a===Object(a)},extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}};